# 指针&引用

- ```c++
  /* ------------------------------------------------------------------ */
  // 引用需要初始化（用**变量**，或者一个能称之为**左值**的东西，在汇编里其有location，而非无名的临时变量）。
  // 引用初始化，两种情况可除外：做函数参数(调用传参时初始化)；做成员变量(构造时初始化)。
  class A {
  public:
  	A(int& a):a_(a) {} // 这里课程构造的参数居然是个引用，我只能暂且理解为可以用引用初始化引用。没什么奇怪的，普通函数的参数可以是引用，构造函数自然也可以。
      int& a_;
  };
  // 上述做成员变量(构造时初始化)是必须的，如果放到构造的括号里，就不是初始化引用了，就是给引用绑定的对象赋值了。
  /* ------------------------------------------------------------------ */
  
  /* ------------------------------------------------------------------ */
  // 函数可以使用引用或指针作为返回值，但不能返回local变量的引用或指针，因为其出了括号消失。
  /* ------------------------------------------------------------------ */
  const int& z = x; // 表示不能通过z来修改x，但可以其他方式改x，这点和指针一样。
// int& const z = x; // 没有这样的东西，因为引用z本来就不能换绑x，这点和指针不同。
  // 实际上，引用底层就是用int* const p;这种const指针实现的，设计出来为了让代码看起来简洁。
  // Java只有堆，只有引用（但其引用和C++的引用不同，更像C++的指针，因为C++的引用不能再给引用赋值，而Java的引用可以）。
  /* ------------------------------------------------------------------ */
  // 引用不能有引用
  // 数组不能由引用组成，因为引用不是一个实体
  int&* p // 错误，引用不能有指针（引用的指针×）
  void foo(int*& p); // 正确，指针可以有引用（指针的引用√）
  /* ------------------------------------------------------------------ */
  ```
  
- ![image-20220907171137104](https://hanbabang-1311741789.cos.ap-chengdu.myqcloud.com/Pics/image-20220907171137104.png)

- ```c
  // 如上图，const int&是可以接右值的，而int&则不能
  // 因为某种说法是，编译器会认为这个temp和const int有某种类似，所以可以用const int&来接
  /* ------------------------------------------------------------------ */
  // 指针如果delete了，会成为野指针，所以常见操作还会将其置空
  // delete空指针很可能没事，编译熟悉决定的，其内可能有判空
  ```

- 指针是一个**对象的地址**，引用是一个**对象的别名**。

- 程序为指针变量分配内存区域，而不为引用分配内存区域。

- 指针使用时要在前加 * ，引用可以直接使用。

- 引用在**定义时就被初始化**，之后绑定的对象不能改变（**从一而终**），指针**指向的对象可以改变**。

- **没有空引用，但有空指针**。这使得使用引用的代码效率比使用指针的更高，因为在**使用引用之前不需要测试它的合法性**。相反，指针则应该总是被测试，**防止其为空**。

- 对引用使用"sizeof"得到的是**变量**的大小，对指针使用“sizeof”得到的是**变量的地址**的大小。

- 理论上**指针的级数没有限制**，但**引用只有一级**。即不存在引用的引用，但可以有指针的指针。
  int **p // 合法，二级指针
  int &&p // 右值引用，并不代表二级引用，或引用的引用
  
- ++引用与++指针的效果不一样。
  例如就++操作而言，对引用的操作直接反应到所指向的对象，而不是改变指向；而对指针的操作，会使指针指向下一个对象，而不是改变所指对象的内容。

### 参考链接

[(19条消息) 引用与指针有什么区别？_椰树林YSL的博客-CSDN博客_引用和指针的区别都有什么](https://xushaoyue.blog.csdn.net/article/details/93623647?spm=1001.2101.3001.6661.1&depth_1-utm_relevant_index=1)

[(19条消息) C++中引用和指针的区别_Listening_music的博客-CSDN博客_c++ 指针和引用的区别](https://blog.csdn.net/Listening_music/article/details/6921608?spm=1001.2101.3001.6661.1&depth_1-utm_relevant_index=1)